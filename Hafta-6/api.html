<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Web APIs</title>
</head>

<body>
    <!-- Web API, web için bir uygulama programlama arayüzü. -->

    <h1>Web APIs</h1>
    <h2>WEB History API</h2>
    <button onclick="back()">Go Back</button>
    <button onclick="go()">Go Back 2 Pages</button>
    <button onclick="forward()">Go Forward</button>
    <h2>Web Storage API</h2>
    <button onclick="setItem()">Set Item</button>
    <button onclick="getItem()">Get Item</button>
    <button onclick="removeItem()">Remove Item</button>
    <h2>Web Fetch API</h2>
    <button onclick="fetchUsers()">Fetch Users</button>
    <h2>Web Notification API</h2>
    <button onclick="notifyme()">Notify Me!</button>

    <script>
        // Web History API
        function back() {
            history.back();
        }
        function go() {
            history.go(-2);
        }
        function forward() {
            history.forward();
        }

        // Web Storage API
        function setItem() {
            // Local Storage
            localStorage.setItem('name', 'Erhan');
            // Session Storage
            sessionStorage.setItem('name', 'Erhan 61');
        }
        function getItem() {
            // Local Storage
            console.log('local', localStorage.getItem('name'));
            // Session Storage
            console.log('session', sessionStorage.getItem('name'));
        }
        function removeItem() {
            // Local Storage
            localStorage.removeItem('name');
            // Session Storage
            sessionStorage.removeItem('name');
        }

        // Web Fetch API
        function fetchUsers() {
            fetch('https://jsonplaceholder.typicode.com/users').then(function (response) {
                return response.json();
            })
                .then(function (users) {
                    console.log('users', users)
                })

        }

        // Web Notification API

        function sayhi() {
            const notification = new Notification('Merhaba Erhan!');
        }


        function notifyme() {
            if ('Notification' in window) {
                if (Notification.permission === 'granded') {
                    sayhi();
                } else if (Notification.permission === 'denied') {
                    console.log('Bildirim izini verilmedi.');
                } else {
                    Notification.requestPermission().then((permission) => {
                        if (permission === 'granted') {
                            console.log('Bildirim izni verildi.asd');
                            sayhi();
                        }
                    });
                }
            } else {
                console.log('Notification API desteklemiyor.')
            }
        }

    </script>
</body>

</html>